---

title: Lab &ndash; Vulnerability Scanning
number: 6
---

# Objective

The objective of this lab is to create a report of potential vulnerabilities for two virtual machines. The deliverable for this lab is your report and this document with your answers to questions below. 
The VM is a Ubuntu-based Linux distribution called MetaSploitable2, which is specifically designed to teach penetration testing skills such as vulnerability scanning.

# Setup Kali Linux VM

# Setup Metasploitable VM

**Important:** Ensure that you can ping each VM from each VM before continuing the lab.

# Part 1. Host Discovery and Scanning using NMAP

NMAP is the de facto standard of host discovery and port scanning and has a host of features that make the tool very robust. In this section of the lab, you’ll try a few of NMAP’s features.

1.	Open a terminal window in Kali by selecting the `Applications` menu in the top left of the screen, and selecting `Accessories` —> `Terminal.`
2.	Type `nmap.` Take a quick look at the available options.
3.	Use nmap to determine whether the your Metasploitable2 VM is live using a ping scan:	

        nmap -sn [IP of VM]

    The ping scan not only sends an ICMP request, but also an ARP ping, TCP pinging, and other techniques to determine if a host is live on the network.

4.	You can also scan a range of IPs using CIDR block notation.

        nmap -sn 172.16.1.0/24

    **Question:** What information is shown for your Metasploitable VM, besides its IP address?

5.	Once you determine that a host is live, you can use NMAP to scan for open ports. Use a TCP scan to determine which ports are open on Metasploitable2:

        nmap -sS [IP of VM]

    This scans approximately 1,800 of the most common TCP ports on the target machine.

    **Question:** which ports are open on the Metasploitable2 VM?


6.	You can also specify additional ports to scan. Scan the first 10,000 ports of the Metasploitable2 VM:

        nmap -sS -p1-10000 [IP of VM]

    **Question:** Did you find any additional ports?

7.	Nmap can provide additional information about open ports by interrogating the ports it finds using the “sV” flag:

        nmap -sV [IP of VM]

    **Note:** Press the “enter” key to see a status of the NMAP scan.

8.	You can get further information still by using the advanced flag (“-A”).

        nmap -sV -A [IP of VM]

    **Question:** what additional information about the open ports on Metasploitable2 were you able to obtain by using the -sV and -A flags?

9.	A useful feature of nmap is operating system fingerprinting which it accomplishes by profiling how a system responds to its scans. 

        nmap -O [IP of VM]

    **Note:** That’s a capital “oh” not a “zero.”

    **Question:** What operating system does nmap report Metasploitable2 to be? 

10.	Now scan for web applications on Metasploitable2. Increasingly, applications run off of a different URL, all using port 80.

        nmap -sV --script=http-enum [IP of VM]

    **Question:** What web applications are available on Metasploitable2?
    
    
    
# Part 2. Nessus

1.	Register for a Nessus Home license. Browse to the URL below and enter your name and email address:
        
    https://www.tenable.com/products/nessus-home

2.	After you receive the email from Tenable containing your serial number, type in the following command in the Kali terminal:

        /opt/nessus/sbin/nessuscli fetch --register <serial>

    Where `<serial>` is the serial number you received in the email from Tenable. You should see a message saying that your activation code has been registered properly. 
    
    
3.	In the Kali VM, open a terminal and type `service nessusd start`

4.	On the Firefox or IceWeasel web browser, click on the bookmark called “Nessus Home/Login” or navigate to `https://kali:8834` to open the Nessus web interface (note the “s”).

5.	Login with username “is560user” and password “password1”. Click the “reload” if the page fails to load.

6.	Click the “Policies” tab and press the “New Policy” button. 

    1.	Choose “Advanced Policy”
    
    2.	Under the setting type “Basic Network Scan,” name the policy “Custom.” Leave the other settings at default.
    
    3.	Under the category “Discovery,” change the “Scan Type” to “All ports.”
    
7.	Click the “Scans” tab and press the “New Scan” button.

    1.	In the “Name” field, enter Metasploitable2. In the “Targets” field, enter the IP address of the MetaSploitable2 VM.
    
    1.	Choose the “Basic Network Scan” scanner template. Under “Assessment” > “Web Applications,” switch the “Scan web applications” setting to on.
    
    1.	Under “Advanced” > “General,” uncheck “Enable safe checks.”
    
    1.	Click the “Save” button, then click the “Scans” tab at the top of the web page. Next, on row of the Metasploitable2 scan you just created, click the triangle symbol to launch the scan.

8.	In the Scans tab you should see the scan job running. This should take about 10 minutes to complete. In the meantime, you can click the job to see the vulnerabilities that Nessus has found so far. Vulnerabilities can be sorted by severity.

**Questions:**

* Do you think it would be difficult to compromise this system? Explain. 
* Which vulnerabilities are critical? Of these, which appear to be most serious? Double-click a vulnerability in the report and read the description.
* What would be the first thing you would do to secure this system?


    






